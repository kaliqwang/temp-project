{% extends "main/base.html" %}

{% block title %}Student Registration{% endblock %}

{% block header %}<h1 class="page-header">Student Registration</h1>{% endblock %}

{% block content %}
  <form id="register-form" action="{% url 'student-register' %}" method="post">{% csrf_token %}
    {{ userForm.as_p }}
    {{ studentProfileForm.as_p }}

    <br />
    <br />

    <div class="row text-center">
      <div class="col-sm-4 col-sm-offset-2">
        <a class="btn btn-lg btn-default" href="{% url 'index' %}">
          <span class="glyphicon glyphicon-log-out" aria-hidden="true"></span>&nbsp;&nbsp;Cancel
        </a>
      </div>
      <div class="col-sm-4">
        <button type="button" id="submit-form" class="btn btn-lg btn-default" role="button">
          <span class="glyphicon glyphicon-log-in" aria-hidden="true"></span>&nbsp;&nbsp;Register
        </button>
      </div>
    </div>

  </form>
{% endblock %}

{% block other %}

  <script>
    $(document).ready(function() {

      $("#submit-form").click(function(e){e.preventDefault();
          var success = true;
          var $inputs = $("input.form-control, textarea.form-control");
          if(!$("#register-form")[0].checkValidity()) {
              $inputs.each(function() {
                  if($(this).val().length == 0){
                      $(this).parent().addClass('has-error');
                      $(this).siblings().children().css('border-color', '#a94442');
                      success = false;
                  } else {
                      $(this).parent().removeClass('has-error');
                      $(this).siblings().children().css('border-color', '#ccc');
                  }
              });
          }
          if(success){
              $("#register-form").submit();
          }
      });

    });
  </script>

{% endblock%}
