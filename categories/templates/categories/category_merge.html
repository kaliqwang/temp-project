{% extends 'base/base.html' %}

{% load static from staticfiles %}

{% block title %}Categories{% endblock %}

{% block header %}Categories{% endblock %}

{% block masthead_bottom %}
  <li><a href="{% url 'announcements:list' %}">Announcements</a></li>
  <li><a href="{% url 'events:list' %}">Events</a></li>
  <li><a href="{% url 'polls:list' %}">Polls</a></li>
{% endblock %}

{% block sidebar_category_merge %}selected{% endblock %}

{% block content %}
  <div class="row">
      <div class="container-white">
        <form id="category-merge-form" action="{% url 'categories:merge' %}" method="post">{% csrf_token %}
          <div class="row">
            <div class="col-sm-3"><div class="form-label">Merged Category</div></div>
            <div class="input-group col-sm-9">
              <input id="category-new-name" type="text" class="form-control category-name-input"
                name="category-{% templatetag openvariable %} index {% templatetag closevariable %}"
                placeholder="Category Name" maxlength="30" required>
              <span  class="input-group-btn"><input id="category-new-color" required type="color" class="form-control btn btn-default" maxlength="7"
                list="datalist-color-choices"
                name="category-{% templatetag openvariable %} index {% templatetag closevariable %}"
                value="{% templatetag openvariable %} color {% templatetag closevariable %}"
                data-old-value="{% templatetag openvariable %} color {% templatetag closevariable %}">
              </span>
            </div>
          </div><br />
          <!-- Category List -->
          <div class="row">
            <div class="col-sm-3"><div class="form-label">Categories</div></div>
            <div id="categories" class="form-group col-sm-8">
              {% for c in categories %}
                <li data-name="{{ c.name }}" data-color="{{ c.color }}" data-pk="{{ c.pk }}" hidden></li>
                {% if forloop.last %}<div id="initial-count" hidden>{{ forloop.counter }}</div>{% endif %}
              {% endfor %}

            </div><hr>
          <!-- Buttons -->
          <div class="row">
            <div class="col-xs-1"></div>
            <div class="col-xs-5">
            </div>
            <div class="col-xs-6 text-right">
              <a class="btn btn-sm btn-default" href="{% block cancel_button_target_url %}{% url 'base:index' %}{% endblock %}">Cancel</a>
              <button id="{% block submit_button_id %}submit-merge-category-form{% endblock %}" class="btn btn-sm btn-custom" type="button">{% block submit_button_text %}Merge{% endblock %}</button>
            </div>
          </div>
        </form>
      </div>

  </div>

  <!-- Color Choices -->
  <datalist id="datalist-color-choices">
    <option>#f2f3f4</option><option>#f3c300</option><option>#875692</option>
    <option>#f38400</option><option>#a1caf1</option><option>#be0032</option>
    <option>#c2b280</option><option>#848482</option><option>#008856</option>
    <option>#e68fac</option><option>#0067a5</option><option>#f99379</option>
    <option>#604e97</option><option>#f6a600</option><option>#b3446c</option>
    <option>#dcd300</option><option>#882d17</option><option>#8db600</option>
    <option>#654522</option><option>#e25822</option><option>#2b3d26</option>
  </datalist>
{% endblock %}

{% block templates %}
  <template id="old-category-template">

      <div class="row">
        <div class="col-sm-1 text-right">
          <input id="category-{% templatetag openvariable %} pk {% templatetag closevariable %}" type="checkbox" value="{% templatetag openvariable %} pk {% templatetag closevariable %}">
        </div>
        <div class="col-sm-8">
          <span class="icon-container" style="color:{% templatetag openvariable %} color {% templatetag closevariable %};"><span class="glyphicon glyphicon-tag"></span></span><label style="font-weight:normal;"for="category-{% templatetag openvariable %} pk{% templatetag closevariable %}" class="category-label">{% templatetag openvariable %} name {% templatetag closevariable %}</label>
        </div>
        <!-- <div class="col-xs-1">
        </div>
        <div class="col-xs-11">
          <div class="input-group">
            <input type="text" class="form-control category-name-input"
              name="category-{% templatetag openvariable %} index {% templatetag closevariable %}"
              value="{% templatetag openvariable %} name {% templatetag closevariable %}"
              placeholder="Category Name" maxlength="30" required>
            <span style="width: 34px; height: 34px; background-color:{% templatetag openvariable %} color {% templatetag closevariable %};">
            </span>
          </div>
        </div> -->
      </div>
  </template>
  <template id="new-category-template">
    <div class="input-group-wrapper">
      <input type="hidden" name="category-{% templatetag openvariable %} index {% templatetag closevariable %}" value="{% templatetag openvariable %} pk {% templatetag closevariable %}">
      <div class="row">
        <div class="col-xs-1">
          <button type="button" class="close remove_field" title="Remove" data-toggle="tooltip" data-placement="top"><span>&times;</span></button>
        </div>
        <div class="col-xs-11">
          <div class="input-group">
            <input type="text" class="form-control category-name-input"
              name="category-{% templatetag openvariable %} index {% templatetag closevariable %}"
              placeholder="Category Name" maxlength="30" required>
            <span class="input-group-btn"><input required type="color" class="form-control btn btn-default" maxlength="7"
              list="datalist-color-choices"
              name="category-{% templatetag openvariable %} index {% templatetag closevariable %}"
              value="{% templatetag openvariable %} color {% templatetag closevariable %}"
              data-old-value="{% templatetag openvariable %} color {% templatetag closevariable %}">
            </span>
          </div>
        </div>
      </div>
    </div>
  </template>
{% endblock %}

{% block script %}<script src="{% static 'categories/js/category_merge.js' %}"></script>{% endblock %}
