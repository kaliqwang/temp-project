{% extends "main/base_list.html" %}

{% load static from staticfiles %}

{% block title %}Announcements{% endblock %}

{% block masthead-announcements %}selected{% endblock %}

{% block sidebar-announcements %}selected{% endblock %}

{% block content %}
  <div id="announcement-list">
    {% for announcement in announcements %}
      <div class="container-white">
        <div class="announcement-wrapper">
          <!-- Announcement Title -->
          <div class="title"><h4><a href="{{ announcement.get_absolute_url }}"><div>{{ announcement.title }}</div></a></h4></div>
          <!-- Announcement Signature -->
          <div class="signature">
            <span class="fa fa-clock-o"></span>
            <span class="datetime">{{ announcement.date_created|date:'F j' }}, {{ announcement.date_created|time:'P' }}</span>
            | Tags: <span class="label" style="background-color:{{ announcement.category.color|default:'#222222' }}">{{ announcement.category|default_if_none:'Everyone' }}</span>
          </div>
          <!-- Announcement Content -->
          <div class="content">{{ announcement.content }}</div>
          <!-- Announcement Images -->
          <div class="image-list">
            {% for image in announcement.image_files.all %}<div class="image"><a href="{{ image.image_file.url }}" target="_blank"/><img src="{{ image.image_file_thumbnail.url }}"></a></div>{% endfor %}{% for image in announcement.image_links.all %}<div class="image"><a href="{{ image.image_link }}" target="_blank"/><img src="{{ image.image_file_thumbnail.url }}"></a></div>{% endfor %}
          </div>
          <!-- Announcement Videos -->
          <div id="collapse-{{ announcement.pk }}" class="collapse">
            <div class="row row-compact">
              {% for video in announcement.youtube_videos.all %}
                <div class="col-sm-6 col-compact">
                  <div class="embed-responsive embed-responsive-16by9 video"><iframe class="embed-responsive-item" src="https://www.youtube.com/embed/{{ video.youtube_video }}" allowfullscreen></iframe></div>
                </div>
              {% endfor %}
            </div>
          </div>
          <!-- Announcement Show More -->
          {% if announcement.youtube_videos.all %}<div class="text-center toggle-collapse" data-toggle="collapse" href="#collapse-{{ announcement.pk }}">Show More</div>{% endif %}
        </div>
      </div>
    {% endfor %}
  </div>
{% endblock %}

{% block sidebar %}
  {{ block.super }}
  <button id="toggle-collapse-all" class="btn btn-default" type="button" data-mode="0">Expand All</button><br/>
{% endblock %}

{% block script %}<script src="{% static 'main/js/announcement_list.js' %}"></script>{% endblock %}
